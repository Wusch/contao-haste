var Haste=Haste||{};Haste.toggleAjaxOperation=function(e,t){function a(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=a.exec(t);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}e.blur();var o=$(e).getFirst("img"),n=e.getAttribute("data-haste-ajax-operation-name"),r=e.getAttribute("data-haste-ajax-operation-value"),i=e.getAttribute("href"),s=a("table",i),l=s?"&table="+s:"";return new Request.JSON({followRedirects:!0,url:window.location.href+l,onComplete:function(t){if(this.getHeader("X-Ajax-Location"))return void window.location.replace(this.getHeader("X-Ajax-Location"));var a=t.nextIcon;if(a.indexOf("/")==-1){var n="images";/\.svg$/i.test(a)&&(n="icons"),a=Contao.script_url+"system/themes/"+Contao.theme+"/"+n+"/"+t.nextIcon}o.src=a,e.setAttribute("data-haste-ajax-operation-value",t.nextValue)}}).post({action:"hasteAjaxOperation",operation:n,id:t,value:r,REQUEST_TOKEN:Contao.request_token}),!1};